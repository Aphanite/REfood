<!--  <span class="check1"><i class="fa fa-check"></i></span> -->
<body style="background: #eaf9ec;">
  <div class="order-dates-container">
    <div class="order__header" style="font-size: 28px; margin-left: 0;">Pickup time</div>
    <div class="order__dates">
      <% grouped_session = session[:cart].group_by { |p| p["supermarketId"].itself } %>
      <%= simple_form_for :order, url: orders_path, html: { id: :pickupContainer } do |f| %>
        <% grouped_session.each do  |group| %>
          <% supermarket = Supermarket.find(group[0])%>
          <div class="d-flex">
            <div class="order-collection-point">
              <hr>
              <div class="d-flex">
                <div class="icon d-flex" style="align-items: center; margin-right: 12px; font-size: 28px;">
                  <i class="fas fa-map-marker-alt"></i>
                </div>
                <div class="location-info">
                  <p style="font-weight: bold;"><%= supermarket.name%></p>
                  <p><%= supermarket.address%></p>
                </div>
              </div>
              <hr>
            </div>
          </div>
          <% dates = group[1].map do |item| %>
            <% Product.find(item["productId"]).best_before_date %>
          <% end %>
          <p>Book a slot</p>
<!--             <%= dates %>
          <%= dates.min.class %> -->
          <%= f.input "", as: :string, required: true, label: false, input_html: { class: "pickupDate", id: "date-#{supermarket.id}",  name: "order[date-#{supermarket.id}]", placeholder: "Date", :data => {:date => dates.min } }%>
          <%= f.input "", as: :string, required: true, label: false, input_html: { class: "pickupTime", id: "time-#{supermarket.id}", name: "order[time-#{supermarket.id}]", placeholder: "Time" } %>
        <% end %>
        <div class="d-flex justify-content-center">
          <%= f.submit "Save and go to payment", class: "btn-gradient" %>
        </div>
      <% end %>
    </div>
  </div>


</body>
